{
  "openapi":"3.0.2",
  "info": {
    "title":"Meetapp",
    "version":"1.0",
    "license": {
      "name": "MIT",
      "url": "https://raw.githubusercontent.com/DiegoVictor/meetapp-api/master/LICENSE"
    }
  },
  "servers": [
    {
      "url":"http://localhost:3333/v1"
    }
  ],
  "paths": {
    "/sessions": {
      "post": {
        "tags": ["Sessions"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "title": "User",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "email": "johndoe@example.com",
                "password": "123456"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authenticates user, return a Bearer Token and user's id and email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                },
                "example": {
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MzMsImlhdCI6MTYzMjE3NzUwNywiZXhwIjoxNjMyNzgyMzA3fQ.PXAPALSkvZfUNkV5g-0xjIXJmGugXkZPd1CUHRK9m18",
                  "user": {
                    "id": 33,
                    "email": "johndoe@example.com",
                    "name": "John Doe"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token not provided",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                },
                "example": {
                  "statusCode": 401,
                  "error": "Unauthorized",
                  "message": "Token not provided",
                  "attributes": {
                    "code": 441,
                    "error": "Token not provided"
                  },
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "post": {
        "tags": ["Users"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "name",
                  "password"
                ],
                "title": "User",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "email": "johndoe@example.com",
                "name": "John Doe",
                "password": "123456"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Create new users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": 32,
                  "email": "johndoe@example.com",
                  "name": "John Doe"
                }
              }
            }
          },
          "400": {
            "description": "Email already in use",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 400,
                  "error": "Bad Request",
                  "message": "Email already in use",
                  "code": 341,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Users"],
        "security": [
          {
            "bearer": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "title": "User",
                "properties": {
                  "confirm_password": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "old_password": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "name": "John Doe",
                "email": "johndoe@example.com",
                "old_password": "123456",
                "password": "123456",
                "confirm_password": "123456"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Update an existing users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                },
                "example": {
                  "id": 33,
                  "email": "johndoe@example.com",
                  "name": "John Doe"
                }
              }
            }
          },
          "400": {
            "description": "Password does not match",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Password does not match": {
                    "value": {
                      "statusCode": 400,
                      "error": "Bad Request",
                      "message": "Password does not match",
                      "code": 340,
                      "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                    }
                  },
                  "Email already in use": {
                    "value": {
                      "statusCode": 400,
                      "error": "Bad Request",
                      "message": "Email already in use",
                      "code": 341,
                      "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/files": {
      "post": {
        "tags": ["Files"],
        "security": [
          {
            "bearer": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["file"],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Upload meetup banner",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/File"
                },
                "example": {
                  "id": 21,
                  "url": "http://localhost:3333/files/724dadb05342e69ecdad3bd77b98e40e.jpg",
                  "name": "example.jpg",
                  "path": "724dadb05342e69ecdad3bd77b98e40e.jpg",
                  "updatedAt": "2021-09-20T22:52:40.929Z",
                  "createdAt": "2021-09-20T22:52:40.929Z"
                }
              }
            }
          }
        }
      }
    },
    "/meetups": {
      "get": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "date",
            "required": false,
            "description": "ISO 8601",
            "schema": {
              "type": "string"
            },
            "example": "2021-09-21T17:56:53"
          },
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Lists meetups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/Meetup"
                      },
                      {
                        "title": "Meetup",
                        "properties": {
                          "organizer": {
                            "allOf": [
                              {
                                "$ref": "#/components/schemas/User"
                              },
                              {
                                "title": "User",
                                "properties": {
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  }
                                }
                              }
                            ]
                          },
                          "banner": {
                            "$ref": "#/components/schemas/File"
                          },
                          "url": {
                            "type": "string"
                          }
                        }
                      }
                    ]
                  }
                },
                "example": [
                  {
                    "id": 37,
                    "date": "2021-09-21T17:56:53.987Z",
                    "description": "Laudantium excepturi neque est qui aut est qui laboriosam voluptatem. Omnis officia aut eligendi id. Cupiditate ad dolorum. Totam cupiditate facere quas reprehenderit est magni. Et possimus molestiae quo ut ex deleniti numquam. Aut sed accusamus rerum qui",
                    "localization": "32109 Nayeli Motorway",
                    "title": "Central Data Developer",
                    "createdAt": "2021-09-20T23:00:04.507Z",
                    "updatedAt": "2021-09-20T23:00:04.508Z",
                    "user_id": 14,
                    "banner_id": 21,
                    "organizer": {
                      "id": 14,
                      "email": "Cielo67@gmail.com",
                      "name": "Kari Donnelly",
                      "password_hash": "$2a$08$ulO5MDQMdBk96i1hqaBSeOG3frY/3Np8317WnSHE2vWDMFpFySEnO",
                      "createdAt": "2021-09-20T22:22:02.381Z",
                      "updatedAt": "2021-09-20T22:22:02.381Z"
                    },
                    "banner": {
                      "url": "http://localhost:3333/files/724dadb05342e69ecdad3bd77b98e40e.jpg",
                      "id": 21,
                      "name": "example.jpg",
                      "path": "724dadb05342e69ecdad3bd77b98e40e.jpg",
                      "createdAt": "2021-09-20T22:52:40.929Z",
                      "updatedAt": "2021-09-20T22:52:40.929Z"
                    },
                    "url": "http://localhost:3333/v1/meetups/37"
                  }
                ]
              }
            },
            "headers": {
              "X-Total-Count": {
                "description": "Total number of registries in the database",
                "schema": {
                  "type": "integer"
                }
              },
              "Link": {
                "description": "Next, Previous, First and Last page's urls",
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "banner_id",
                  "date",
                  "description",
                  "localization",
                  "title"
                ],
                "properties": {
                  "banner_id": {
                    "type": "integer"
                  },
                  "date": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "localization": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "banner_id": 1,
                "date": "2022-12-30",
                "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat",
                "localization": "4795 Denesik Throughway Kaileefurt, NC 07927-4723",
                "title": "Senior Creative Planner"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Create a new meetup",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Meetup"
                },
                "example": {
                  "id": 41,
                  "banner_id": 1,
                  "date": "2022-12-30T00:00:00.000Z",
                  "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat",
                  "localization": "4795 Denesik Throughway Kaileefurt, NC 07927-4723",
                  "title": "Senior Creative Planner",
                  "user_id": 33,
                  "createdAt": "2021-09-20T23:50:42.141Z",
                  "updatedAt": "2021-09-20T23:50:42.141Z"
                }
              }
            }
          },
          "400": {
            "description": "Past dates are not permited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 400,
                  "error": "Bad Request",
                  "message": "Past dates are not permited",
                  "code": 140,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          },
          "404": {
            "description": "The provided banner does not exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 404,
                  "error": "Not Found",
                  "message": "The provided banner does not exists",
                  "code": 141,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          }
        }
      }
    },
    "/meetups/{id}": {
      "put": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "banner_id": {
                    "type": "integer"
                  },
                  "date": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "localization": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "banner_id": 1,
                "date": "2022-12-30",
                "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat",
                "localization": "4795 Denesik Throughway Kaileefurt, NC 07927-4723",
                "title": "Senior Creative Planner"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Update a meetup",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Meetup"
                },
                "example": {
                  "id": 41,
                  "banner_id": 1,
                  "date": "2022-12-30T00:00:00.000Z",
                  "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat",
                  "localization": "4795 Denesik Throughway Kaileefurt, NC 07927-4723",
                  "title": "Senior Creative Planner",
                  "user_id": 33,
                  "createdAt": "2021-09-20T23:50:42.141Z",
                  "updatedAt": "2021-09-20T23:50:42.141Z"
                }
              }
            }
          },
          "400": {
            "description": "Past dates are not permited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 400,
                  "error": "Bad Request",
                  "message": "Past dates are not permited",
                  "code": 140,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          },
          "401": {
            "description": "You can't edit past meetups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                },
                "example": {
                  "statusCode": 401,
                  "error": "Unauthorized",
                  "message": "You can't edit past meetups",
                  "attributes": {
                    "code": 142,
                    "error": "You can't edit past meetups"
                  },
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          },
          "404": {
            "description": "The provided banner does not exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "The provided banner does not exists": {
                    "value": {
                      "statusCode": 404,
                      "error": "Not Found",
                      "message": "The provided banner does not exists",
                      "code": 141,
                      "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                    }
                  },
                  "Meetup does not exists": {
                    "value": {
                      "statusCode": 404,
                      "error": "Not Found",
                      "message": "Meetup does not exists",
                      "code": 144,
                      "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "responses": {
          "204": {
            "description": "Delete a meetup"
          },
          "401": {
            "description": "You can't remove past meetups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                },
                "example": {
                  "statusCode": 401,
                  "error": "Unauthorized",
                  "message": "You can't remove past meetups",
                  "attributes": {
                    "code": 143,
                    "error": "You can't remove past meetups"
                  },
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          },
          "404": {
            "description": "Meetup does not exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 404,
                  "error": "Not Found",
                  "message": "Meetup does not exists",
                  "code": 144,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          }
        }
      }
    },
    "/scheduled": {
      "get": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lists logged in user's meetups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/Meetup"
                      },
                      {
                        "title": "Meetup",
                        "properties": {
                          "url": {
                            "type": "string"
                          }
                        }
                      }
                    ]
                  }
                },
                "example": [
                  {
                    "id": 2,
                    "date": "2020-11-06T00:50:50.191Z",
                    "description": "Iste harum veritatis laboriosam. Corrupti ab rerum non possimus expedita asperiores. Eum voluptatem repellendus autem nostrum. Quae mollitia dolorum omnis ut est.\n \rDolor aliquid voluptatem et dolore suscipit ullam omnis voluptatem saepe. Facere voluptatu",
                    "localization": "782 Alfonso Streets",
                    "title": "Future Directives Developer",
                    "user_id": 33,
                    "banner_id": 19,
                    "url": "http://localhost:3333/v1/scheduled/2",
                    "createdAt": "2021-09-20T23:00:04.502Z",
                    "updatedAt": "2021-09-20T23:00:04.502Z"
                  }
                ]
              }
            },
            "headers": {
              "X-Total-Count": {
                "description": "Total number of registries in the database",
                "schema": {
                  "type": "integer"
                }
              }
            }
          }
        }
      }
    },
    "/scheduled/{id}": {
      "get": {
        "tags": ["Meetups"],
        "security": [
          {
            "bearer": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Show one logged in user's meetup",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Meetup"
                    },
                    {
                      "title": "Meetup",
                      "properties": {
                        "banner": {
                          "$ref": "#/components/schemas/File"
                        },
                        "url": {
                          "type": "string"
                        }
                      }
                    }
                  ]
                },
                "example": {
                  "id": 1,
                  "date": "2020-09-29T14:14:13.521Z",
                  "description": "Et culpa sunt ullam. Aspernatur expedita est numquam. Veniam sunt eligendi eum soluta recusandae iure numquam excepturi ea. Vitae omnis dolorem.\n \rEst totam consectetur quo omnis a doloremque qui. Consequatur quia ipsum corrupti. Ab id impedit ut occaecat",
                  "localization": "8831 Schaden Ports",
                  "title": "Chief Web Engineer",
                  "user_id": 22,
                  "banner_id": 1,
                  "banner": {
                    "id": 1,
                    "name": "parse_xss_fresh.png",
                    "path": "b2c3b213bb89c3586d0d07b2c7eb2636.png",
                    "url": "http://localhost:3333/files/b2c3b213bb89c3586d0d07b2c7eb2636.png",
                    "createdAt": "2021-09-20T22:23:33.605Z",
                    "updatedAt": "2021-09-20T22:23:33.605Z"
                  },
                  "url": "http://localhost:3333/v1/scheduled/1/1",
                  "createdAt": "2021-09-20T23:00:04.501Z",
                  "updatedAt": "2021-09-20T23:00:04.502Z"
                }
              }
            },
            "headers": {
              "X-Total-Count": {
                "description": "Total number of registries in the database",
                "schema": {
                  "type": "integer"
                }
              }
            }
          },
          "404": {
            "description": "Meetup does not exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "statusCode": 404,
                  "error": "Not Found",
                  "message": "Meetup does not exists",
                  "code": 144,
                  "docs": "https://github.com/DiegoVictor/meetapp-api#errors-reference"
                }
              }
            }
          }
        }
      }
    },
  },
  "components": {
    "schemas": {
      "Meetup": {
        "properties": {
          "id": {
            "type": "integer"
          },
          "banner_id": {
            "type": "integer"
          },
          "date": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "localization": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "user_id": {
            "type": "integer"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        }
      },
      "User": {
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "File": {
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        }
      },
      "Error": {
        "properties": {
          "statusCode": {
            "type": "integer"
          },
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "code": {
            "type": "integer"
          },
          "docs": {
            "type": "string"
          }
        }
      },
      "Unauthorized": {
        "properties": {
          "statusCode": {
            "type": "integer"
          },
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "attributes": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer"
              },
              "error": {
                "type": "string"
              }
            }
          },
          "docs": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "type": "http"
      }
    }
  }
}
